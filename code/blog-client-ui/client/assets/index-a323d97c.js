import{r as _,u as B,o as C,c as r,d as v,e as h,h as p,g as l,w as c,B as L,f as S,l as j,A as N,F as $,p as F,I as q,t as b,j as A}from"./index-1c70507a.js";const R={class:"container"},T={class:"bottom"},W={class:"lh-main"},z={style:{display:"flex","justify-content":"center",gap:"10px","font-size":"14px","align-items":"center",color:"rgba(0, 0, 0, 0.6)"}},U={__name:"index",setup(D){_({w:300});const g=_(),f=B(),m=_(),x=_(),I=_([t=>f.isLogin||"需要登录后才能描述你的需求哦",t=>!!t||"没有任何输入哦",t=>t&&t.length>=3||"Min 3 characters"]);function k(){const t=(e,s)=>Math.floor(Math.random()*(s-e+1))+e,i=(e,s)=>Math.random()*(s-e)+e,n=t(0,255),d=t(0,255),o=t(0,255),a=Math.round(i(0,255));return`#${n.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}`}function M(){if(g.value="",!f.isLogin){g.value="需要登录后才能描述你的需求哦";return}q("/api/demand/create",{text:m.value}).then(t=>{t.data.status==200&&(y(),m.value="")})}async function y(){const t=await L("/api/demand/list");t.status==200&&(x.value=t.data,setTimeout(V,500))}function V(){const t=document.querySelector(".lh-main"),i=t.offsetWidth,n=t.children,d=Math.floor(i/n[0].offsetWidth),o=[];for(let a=0;a<n.length;a++)if(n[a].style.background=k(),a<d)o.push(n[a].offsetHeight);else{const e={minHeight:o[0],minI:0};for(let s=0;s<o.length;s++)o[s]<e.minHeight&&(e.minHeight=o[s],e.minI=s);n[a].style.position="absolute",n[a].style.left=n[e.minI].offsetLeft+"px",n[a].style.top=e.minHeight+"px",o[e.minI]=o[e.minI]+n[a].offsetHeight}}return C(()=>{y()}),(t,i)=>{const n=r("v-img"),d=r("v-avatar"),o=r("v-text-field"),a=r("v-sheet"),e=r("v-card-title"),s=r("v-card-text"),H=r("v-card"),w=r("v-container");return v(),h("div",R,[p("div",T,[l(a,{rounded:"",class:"pa-4"},{default:c(()=>[l(o,{label:"你的需求",placeholder:"输入你的想法",modelValue:m.value,"onUpdate:modelValue":i[0]||(i[0]=u=>m.value=u),variant:"outlined",density:"compact","append-icon":"mdi-send",rules:I.value,"onClick:append":M},{prepend:c(()=>[S(f).isLogin?(v(),j(d,{key:0},{default:c(()=>[l(n,{src:S(f).user.avatar},null,8,["src"])]),_:1})):N("",!0)]),_:1},8,["modelValue","rules"])]),_:1})]),l(w,null,{default:c(()=>[p("div",W,[(v(!0),h($,null,F(x.value,u=>(v(),h("div",{key:u.text},[p("div",null,[l(H,{flat:"",color:"transparent"},{default:c(()=>[l(e,{class:"d-flex"},{default:c(()=>[p("div",z,[l(d,null,{default:c(()=>[l(n,{src:u.auther.avatar},null,8,["src"])]),_:2},1024),p("div",null,"来自"+b(u.auther.username)+"说",1)])]),_:2},1024),l(s,null,{default:c(()=>[A(b(u.text),1)]),_:2},1024)]),_:2},1024)])]))),128))])]),_:1})])}}};export{U as default};
