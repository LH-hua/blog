import{_ as M,b as S,r as H,k as j,o as z,z as A,c as l,d as D,e as L,g as t,w as e,G as B,h as n,t as c,j as T,v as V,x as E}from"./index-1c70507a.js";import{M as N,H as m,p as q,t as C}from"./typo-aea07511.js";import{c as U}from"./article-fb1a7804.js";const v=r=>(V("data-v-e2b8a460"),r=r(),E(),r),G={class:"container"},J={style:{"align-self":"flex-start",position:"sticky",top:"65px"}},R={style:{display:"flex",gap:"10px","align-items":"center"}},W=v(()=>n("span",{style:{color:"rgba(0, 0, 0, 0.5)","font-size":"12px"}},null,-1)),F={style:{width:"100%",display:"flex","align-items":"center","justify-content":"space-around"}},K=v(()=>n("br",null,null,-1)),O=v(()=>n("div",{class:"table-of-contents"},null,-1)),P={style:{"font-weight":"1000"}},Q={style:{display:"flex",gap:"10px","align-items":"center"}},X={style:{color:"rgba(0, 0, 0, 0.5)","font-size":"12px"}},Y={class:"typo"},Z=["innerHTML"],$={__name:"post",setup(r){const a=S({data:{title:"",date:"",body:"",auther:{}},user:{}}),i=H(null),g=j();function y(){const d=document.querySelector(".table-of-contents");i.value=new N({highlight:function(o,s){if(s&&m.getLanguage(s))try{return'<pre class="hljs"><code>'+m.highlight(s,o,!0).value+"</code></pre>"}catch{}return'<pre class="hljs"><code>'+i.value.utils.escapeHtml(o)+"</code></pre>"}}).use(q,{permalink:!0,permalinkBefore:!0}).use(C,{callback:function(o,s){d.innerHTML=o,b()}})}function b(){document.querySelectorAll(".table-of-contents a").forEach(o=>{o.style.color="rgba(0,0,0,0.5)",o.style.fontWeight=800,console.log(o),o.addEventListener("click",function(s){s.preventDefault(),o.scrollIntoView(!0)})})}async function x(){const d=g.params.id;U({_id:d}).then(o=>{o.data.body=i.value.render(o.data.body),a.data=o.data,document.title=o.data.title,B({u_id:a.data.u_id}).then(s=>{console.log(s),a.data.auther.post_total=s.post_total})})}return z(()=>{y(),x()}),A(()=>{}),(d,o)=>{const s=l("v-img"),_=l("v-avatar"),u=l("v-card-title"),k=l("v-divider"),p=l("v-card-text"),h=l("v-card"),f=l("v-sheet"),w=l("v-card-subtitle"),I=l("side-main");return D(),L("div",G,[t(I,null,{side:e(()=>[n("div",J,[t(f,{rounded:"lg",class:"pa-2",elevation:1},{default:e(()=>[t(h,{flat:""},{default:e(()=>[t(u,null,{default:e(()=>[n("div",R,[t(_,{size:"40"},{default:e(()=>[t(s,{src:a.data.auther.avatar,alt:a.data.auther.username},null,8,["src","alt"])]),_:1}),n("span",null,c(a.data.auther.username),1),W])]),_:1}),t(p,null,{default:e(()=>[t(k,{class:"border-opacity-100"}),n("div",F,[n("span",null,"文章："+c(a.data.auther.post_total||0),1),n("span",null,"粉丝："+c(a.data.auther.someone||0),1)])]),_:1})]),_:1})]),_:1}),K,t(f,{rounded:"lg",class:"pa-2",elevation:1},{default:e(()=>[t(h,{flat:""},{default:e(()=>[t(u,null,{default:e(()=>[T("目录")]),_:1}),t(p,null,{default:e(()=>[O]),_:1})]),_:1})]),_:1})])]),main:e(()=>[t(f,{rounded:"lg",elevation:1},{default:e(()=>[t(h,{flat:"","min-height":"900px"},{default:e(()=>[t(s,{src:a.data.cover?a.data.cover:"/image/err.jpg",cover:"",height:"300",width:"100%"},null,8,["src"]),t(u,null,{default:e(()=>[n("h2",P,c(a.data.title),1)]),_:1}),t(w,null,{default:e(()=>[n("div",Q,[t(_,{size:"30"},{default:e(()=>[t(s,{src:a.data.auther.avatar,alt:a.data.auther.username},null,8,["src","alt"])]),_:1}),n("span",null,c(a.data.auther.username),1),n("span",X,c(a.data.date),1)])]),_:1}),t(p,null,{default:e(()=>[n("div",Y,[n("div",{innerHTML:a.data.body},null,8,Z)])]),_:1})]),_:1})]),_:1})]),_:1})])}}},ot=M($,[["__scopeId","data-v-e2b8a460"]]);export{ot as default};
