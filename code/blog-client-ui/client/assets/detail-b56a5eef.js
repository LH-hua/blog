import{_ as I,a as w,k as D,r as S,b as A,o as B,q as L,c as s,d as T,e as V,g as e,w as o,h as c,t as _,j as m,v as Y,x as j}from"./index-1c70507a.js";import{h as q}from"./moment-a9aaa855.js";import{M as E,H as h,p as N,t as z}from"./typo-aea07511.js";import{_ as C}from"./publish-3f269682.js";import{c as R}from"./article-fb1a7804.js";const F=d=>(Y("data-v-c78f41a0"),d=d(),j(),d),J={class:"containner"},U={style:{"font-weight":"1000"}},W={style:{display:"flex",gap:"10px","align-items":"center"}},$={style:{color:"rgba(0, 0, 0, 0.5)","font-size":"12px"}},G={class:"typo"},K=["innerHTML"],O=F(()=>c("div",{class:"table-of-contents"},null,-1)),P={__name:"detail",setup(d){w();const v=D();let r=S();const n=A({data:{title:"",date:"",body:"",auther:{}},user:{}}),g=l=>q(l).format("YYYY-MM-DD HH:mm");function y(){const l=document.querySelector(".table-of-contents");r.value=new E({highlight:function(t,a){if(a&&h.getLanguage(a))try{return'<pre class="hljs"><code>'+h.highlight(a,t,!0).value+"</code></pre>"}catch{}return'<pre class="hljs"><code>'+r.value.utils.escapeHtml(t)+"</code></pre>"}}).use(N,{permalink:!0,permalinkBefore:!0}).use(z,{callback:function(t,a){l.innerHTML=t,x()}})}function x(){document.querySelectorAll(".table-of-contents a").forEach(t=>{t.style.color="rgba(0,0,0,0.5)",t.style.fontWeight=800,console.log(t),t.addEventListener("click",function(a){a.preventDefault(),t.scrollIntoView(!0)})})}async function b(){const l=v.params.id;R({_id:l}).then(t=>{t.data.body=r.value.render(t.data.body),n.data=t.data,document.title=t.data.title,getUserInfo({u_id:n.data.u_id}).then(a=>{console.log(a),n.data.auther.post_total=a.post_total})})}return B(()=>{y(),b()}),L(()=>{}),(l,t)=>{const a=s("v-card-title"),i=s("v-img"),M=s("v-avatar"),k=s("v-card-subtitle"),u=s("v-card-text"),p=s("v-card"),f=s("v-sheet"),H=s("side-main");return T(),V("div",J,[e(H,null,{main:o(()=>[e(f,{class:"pa-5"},{default:o(()=>[e(p,{flat:"","min-height":"900px"},{default:o(()=>[e(a,null,{default:o(()=>[c("h2",U,_(n.data.title),1)]),_:1}),e(k,null,{default:o(()=>[c("div",W,[e(M,{size:"30"},{default:o(()=>[e(i,{src:n.data.auther.avatar,alt:n.data.auther.username},null,8,["src","alt"])]),_:1}),c("span",null,_(n.data.auther.username),1),m(" · "),c("span",$,_(g(n.data.date)),1)])]),_:1}),e(u,null,{default:o(()=>[c("div",G,[c("div",{innerHTML:n.data.body},null,8,K)])]),_:1})]),_:1})]),_:1})]),side:o(()=>[e(C),e(f,{style:{"margin-top":"5px"},rounded:"lg",class:"pa-5"},{default:o(()=>[e(p,{flat:""},{default:o(()=>[e(a,null,{default:o(()=>[m("目录")]),_:1}),e(u,null,{default:o(()=>[O]),_:1})]),_:1})]),_:1})]),_:1})])}}},at=I(P,[["__scopeId","data-v-c78f41a0"]]);export{at as default};
